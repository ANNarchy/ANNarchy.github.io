
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../_static/logo.svg">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>Simulation - ANNarchy 4.7.0</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#simulation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ANNarchy 4.7.0" class="md-header__button md-logo" aria-label="ANNarchy 4.7.0" data-md-component="logo">
      
  <img src="../../_static/logowhite.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ANNarchy 4.7.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Simulation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://bitbucket.org/ANNarchy/ANNarchy/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M22.2 32A16 16 0 0 0 6 47.8a26.35 26.35 0 0 0 .2 2.8l67.9 412.1a21.77 21.77 0 0 0 21.3 18.2h325.7a16 16 0 0 0 16-13.4L505 50.7a16 16 0 0 0-13.2-18.3 24.58 24.58 0 0 0-2.8-.2L22.2 32zm285.9 297.8h-104l-28.1-147h157.3l-25.2 147z"/></svg>
  </div>
  <div class="md-source__repository">
    Bitbucket
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ANNarchy 4.7.0" class="md-nav__button md-logo" aria-label="ANNarchy 4.7.0" data-md-component="logo">
      
  <img src="../../_static/logowhite.svg" alt="logo">

    </a>
    ANNarchy 4.7.0
  </label>
  
    <div class="md-nav__source">
      <a href="https://bitbucket.org/ANNarchy/ANNarchy/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M22.2 32A16 16 0 0 0 6 47.8a26.35 26.35 0 0 0 .2 2.8l67.9 412.1a21.77 21.77 0 0 0 21.3 18.2h325.7a16 16 0 0 0 16-13.4L505 50.7a16 16 0 0 0-13.2-18.3 24.58 24.58 0 0 0-2.8-.2L22.2 32zm285.9 297.8h-104l-28.1-147h157.3l-25.2 147z"/></svg>
  </div>
  <div class="md-source__repository">
    Bitbucket
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Structure/" class="md-nav__link">
        General structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Parser/" class="md-nav__link">
        Parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RateNeuron/" class="md-nav__link">
        Rate-coded neurons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SpikeNeuron/" class="md-nav__link">
        Spiking neurons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../RateSynapse/" class="md-nav__link">
        Rate-coded synapses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../SpikeSynapse/" class="md-nav__link">
        Spiking synapses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Populations/" class="md-nav__link">
        Populations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Projections/" class="md-nav__link">
        Projections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Connector/" class="md-nav__link">
        Connectivity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Inputs/" class="md-nav__link">
        Setting inputs
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Simulation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Simulation
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiling-the-network" class="md-nav__link">
    Compiling the network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulating-the-network" class="md-nav__link">
    Simulating the network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#early-stopping" class="md-nav__link">
    Early-stopping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-inputs-periodically" class="md-nav__link">
    Setting inputs periodically
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../NumericalMethods/" class="md-nav__link">
        Equations and numerical methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Recording/" class="md-nav__link">
        Recording with Monitors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Saving/" class="md-nav__link">
        Saving and loading a network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Network/" class="md-nav__link">
        Parallel simulations and networks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Hybrid/" class="md-nav__link">
        Hybrid networks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../StructuralPlasticity/" class="md-nav__link">
        Structural plasticity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ConvolutionalNetworks/" class="md-nav__link">
        Convolution and pooling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Notebooks/" class="md-nav__link">
        Notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Reporting/" class="md-nav__link">
        Reporting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Logging/" class="md-nav__link">
        Logging with tensorboard
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          core
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="core" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          core
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/ANNarchy/" class="md-nav__link">
        Top-level methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Neuron/" class="md-nav__link">
        Neuron class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/SpecificNeuron/" class="md-nav__link">
        Built-in neuron types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Synapse/" class="md-nav__link">
        Synapse class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/SpecificSynapse/" class="md-nav__link">
        Built-in synapse types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Population/" class="md-nav__link">
        Population class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/SpecificPopulation/" class="md-nav__link">
        Specific Populations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Projection/" class="md-nav__link">
        Projection class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/SpecificProjection/" class="md-nav__link">
        Specific Projections
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Dendrite/" class="md-nav__link">
        Dendrite class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Monitor/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/RandomDistribution/" class="md-nav__link">
        Random Distributions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Network/" class="md-nav__link">
        Network class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/IO/" class="md-nav__link">
        Saving / Loading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Utilities/" class="md-nav__link">
        Reporting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Hybrid/" class="md-nav__link">
        Hybrid networks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          extensions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="extensions" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Convolution/" class="md-nav__link">
        Convolution and Pooling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/Logging/" class="md-nav__link">
        Logging with tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../API/BOLD/" class="md-nav__link">
        BOLD monitoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/List/" class="md-nav__link">
        List of notebooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/NeuralField/" class="md-nav__link">
        Neural Field
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/BarLearning/" class="md-nav__link">
        Bar Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/StructuralPlasticity/" class="md-nav__link">
        Structural plasticity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/Izhikevich/" class="md-nav__link">
        Izhikevich
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/GapJunctions/" class="md-nav__link">
        Gap junctions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/HodgkinHuxley/" class="md-nav__link">
        Hodgkin-Huxley
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/COBA/" class="md-nav__link">
        COBA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/STP/" class="md-nav__link">
        STP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/SimpleSTDP/" class="md-nav__link">
        STDP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/Ramp/" class="md-nav__link">
        Ramp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/Hybrid/" class="md-nav__link">
        Hybrid
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/Image/" class="md-nav__link">
        Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/Webcam/" class="md-nav__link">
        Webcam
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/MultipleNetworks/" class="md-nav__link">
        Parallel simulations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/BayesianOptimization/" class="md-nav__link">
        Bayesian optimization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/BasalGanglia/" class="md-nav__link">
        Logging with tensorboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../example/BoldMonitoring/" class="md-nav__link">
        BOLD monitoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../License/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compiling-the-network" class="md-nav__link">
    Compiling the network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulating-the-network" class="md-nav__link">
    Simulating the network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#early-stopping" class="md-nav__link">
    Early-stopping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-inputs-periodically" class="md-nav__link">
    Setting inputs periodically
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://bitbucket.org/ANNarchy/ANNarchy/src/default/docs/manual/Simulation.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="simulation">Simulation<a class="headerlink" href="#simulation" title="Permanent link">#</a></h1>
<h2 id="compiling-the-network">Compiling the network<a class="headerlink" href="#compiling-the-network" title="Permanent link">#</a></h2>
<p>Once all the relevant information has been defined, one needs to
actually compile the network, by calling the <code>ANNarchy.compile()</code>
method:</p>
<div class="highlight"><pre><span></span><code><span class="nb">compile</span><span class="p">()</span>
</code></pre></div>
<p>The optimized C++ code will be generated in the <code>annarchy/</code> subfolder
relative to your script, compiled, the underlying objects created and
made available to the Python interface.</p>
<p>You can specify the following arguments to <code>compile()</code>:</p>
<ul>
<li><code>directory</code>: relative path to the directory where files will be
    generated and compiled (default: <code>annarchy/</code>)</li>
<li><code>populations</code> and <code>projections</code>: to compile only a subpart of the
    network, see <a href="../Network/">Network</a>.</li>
<li><code>compiler</code>: to select which C++ compiler will be used. By default
    <code>g++</code> on Linux and <code>clang++</code> on OS X are used, you can change it
    here. Note that only these two compilers are supported for now, and
    that they must be in your <code>$PATH</code>.</li>
<li><code>compiler_flags</code>: to select which flags are passed to the compiler.
    By default it is <code>-march=native -O2</code>, but you can fine-tune it here.
    Beware that <code>-O3</code> is most often a bad idea!</li>
</ul>
<h2 id="simulating-the-network">Simulating the network<a class="headerlink" href="#simulating-the-network" title="Permanent link">#</a></h2>
<p>After the network is correctly compiled, the simulation can be run for
the specified duration (in milliseconds) through the
<code>ANNarchy.simulate()</code> method:</p>
<div class="highlight"><pre><span></span><code><span class="n">simulate</span><span class="p">(</span><span class="mf">1000.0</span><span class="p">)</span> <span class="c1"># Simulate for 1 second</span>
</code></pre></div>
<p>The provided duration should be a multiple of <code>dt</code>. If not, the number
of simulation steps performed will be approximated.</p>
<p>In some cases, you may want to perform only one step of the simulation,
instead of specifing the duration. The <code>ANNarchy.step()</code> can then be
used.</p>
<div class="highlight"><pre><span></span><code><span class="n">step</span><span class="p">()</span> <span class="c1"># Simulate for 1 step</span>
</code></pre></div>
<h2 id="early-stopping">Early-stopping<a class="headerlink" href="#early-stopping" title="Permanent link">#</a></h2>
<p>In some cases, it is desired to stop the simulation whenever a criterion
is fulfilled (for example, a neural integrator exceeds a certain
threshold), not after a fixed amount of time.</p>
<p>There is the possibility to define a <code>stop_condition</code> at the
<code>Population</code> level:</p>
<div class="highlight"><pre><span></span><code><span class="n">pop1</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">stop_condition</span> <span class="o">=</span> <span class="s2">&quot;r &gt; 1.0&quot;</span><span class="p">)</span>
</code></pre></div>
<p>When calling the <code>simulate_until()</code> method instead of <code>simulate()</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="n">simulate_until</span><span class="p">(</span><span class="n">max_duration</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">populations</span><span class="o">=</span><span class="n">pop1</span><span class="p">)</span>
</code></pre></div>
<p>the simulation will be stopped whenever the <code>stop_condition</code> of <code>pop1</code>
is met, i.e. when the firing rate of <em>any</em> neuron of pop1 is above 1.0.
If the condition is never met, the simulation will last maximally
<code>max_duration</code>. The methods returns the effective duration of the
simulation (to compute reaction times, for example).</p>
<p>The <code>stop_condition</code> can use any logical operation on the parameters and
variables of the neuron associated to the population:</p>
<div class="highlight"><pre><span></span><code><span class="n">pop1</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">stop_condition</span> <span class="o">=</span> <span class="s2">&quot;(r &gt; 1.0) and (mp &lt; 2.0)&quot;</span><span class="p">)</span>
</code></pre></div>
<p>By default, the simulation stops when at least one neuron in the
population fulfills the criterion. If you want to stop the simulation
when <em>all</em> neurons fulfill the condition, you can use the flag <code>all</code>
after the condition:</p>
<div class="highlight"><pre><span></span><code><span class="n">pop1</span> <span class="o">=</span> <span class="n">Population</span><span class="p">(</span> <span class="o">...</span> <span class="p">,</span> <span class="n">stop_condition</span> <span class="o">=</span> <span class="s2">&quot;r &gt; 1.0 : all&quot;</span><span class="p">)</span>
</code></pre></div>
<p>The flag <code>any</code> is the default behavior and can be omitted.</p>
<p>The stop criterion can depend on several populations, by providing a
list of populations to the <code>populations</code> argument instead of a single
population:</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="n">simulate_until</span><span class="p">(</span><span class="n">max_duration</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">populations</span><span class="o">=</span><span class="p">[</span><span class="n">pop1</span><span class="p">,</span> <span class="n">pop2</span><span class="p">])</span>
</code></pre></div>
<p>The simulation will then stop when the criterion is met in both
populations at the same time. If you want that the simulation stops when
at least one population meets its criterion, you can specify the
<code>operator</code> argument:</p>
<div class="highlight"><pre><span></span><code><span class="n">t</span> <span class="o">=</span> <span class="n">simulate_until</span><span class="p">(</span><span class="n">max_duration</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span> <span class="n">populations</span><span class="o">=</span><span class="p">[</span><span class="n">pop1</span><span class="p">,</span> <span class="n">pop2</span><span class="p">],</span> <span class="n">operator</span><span class="o">=</span><span class="s1">&#39;or&#39;</span><span class="p">)</span>
</code></pre></div>
<p>The default value of <code>operator</code> is a <code>'and'</code> function between the
populations' criteria.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Global operations (min, max, mean) are not possible inside the
<code>stop_condition</code>. If you need them, store them in a variable in the
<code>equations</code> argument of the neuron and use it as the condition:</p>
<div class="highlight"><pre><span></span><code><span class="n">equations</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    r = ...</span>
<span class="s2">    max_r = max(r)</span>
<span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
<h2 id="setting-inputs-periodically">Setting inputs periodically<a class="headerlink" href="#setting-inputs-periodically" title="Permanent link">#</a></h2>
<p>In most cases, your simulation will be decomposed into a series of
fixed-duration trials, where you basically set inputs at the beginning
of the trial, run the simulation for a fixed duration, and possibly read
out results at the end:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Iterate over 100 trials</span>
<span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="c1"># Set inputs to the network</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="n">Uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c1"># Simulate for 1 second</span>
    <span class="n">simulate</span><span class="p">(</span><span class="mf">1000.</span><span class="p">)</span>
    <span class="c1"># Save the output</span>
    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
</code></pre></div>
<p>For convenience, we provide the decorator <code>every</code>, which allows to
register a python method and call it automatically during the simulation
with a fixed period:</p>
<div class="highlight"><pre><span></span><code><span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># Set inputs to the network</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="n">Uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c1"># Save the output of the previous step</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pop</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>

<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="mf">1000.</span><span class="p">)</span>
</code></pre></div>
<p>In this example, <code>set_inputs()</code> will be executed just before the steps
corresponding to times t = 0., 1000., 2000., and so on until t = 100000.</p>
<p>The method can have any name, but must accept only one argument, the
integer <code>n</code> which will be incremented at each call of the method (i.e.
it will take the values 0, 1, 2 until 99). This can for example be used
to access data in a numpy array:</p>
<div class="highlight"><pre><span></span><code><span class="n">images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>

<span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># Set inputs to the network</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="p">:,</span> <span class="p">:]</span>

<span class="n">simulate</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="mf">1000.</span><span class="p">)</span>
</code></pre></div>
<p>One can define several methods that will be called in the order of their
definition:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
<p>In this example, <code>set_inputs()</code> will be called first, followed by
<code>reset_inputs</code>, so <code>pop.I</code> will finally be 0.0. The decorator <code>every</code>
accepts an argument <code>offset</code> defining a delay within the period to call
the method:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">set</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">500.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
<p>In this case, <code>set_inputs()</code> will be called at times 0, 1000, 2000...
while <code>reset_inputs()</code> will be called at times 500, 1500, 2500...,
allowing to structure a trial more effectively. The <code>offset</code> can be set
negative, in which case it will be relative to the end of the trial:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">offset</span><span class="o">=-</span><span class="mf">100.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
<p>In this example, the method will be called at times 900, 1900, 2900 and
so on. The <code>offset</code> value can not be longer than the <code>period</code>, by
definition. If you try to do so, a modulo operation will anyway be
applied (i.e. an offset of 1500 with a period of 1000 becomes 500).</p>
<p>Finally, the <code>wait</code> argument allows to delay the first call to the
method from a fixed interval:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">,</span> <span class="n">wait</span><span class="o">=</span><span class="mf">5000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">0.0</span>
</code></pre></div>
<p>In this case, the method will be called at times 5000, 6000 and so on.</p>
<p>Between two calls to <code>simulate()</code>, the callbacks can be disabled or
re-enabled using the following methods:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@every</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mf">1000.</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">reset</span> <span class="n">inputs</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">pop</span><span class="o">.</span><span class="n">I</span> <span class="o">=</span> <span class="mf">0.0</span>

<span class="c1"># Simulate with callbacks</span>
<span class="n">simulate</span><span class="p">(</span><span class="mf">10000.</span><span class="p">)</span>

<span class="c1"># Disable callbacks</span>
<span class="n">disable_callbacks</span><span class="p">()</span>

<span class="c1"># Simulate without callbacks</span>
<span class="n">simulate</span><span class="p">(</span><span class="mf">10000.</span><span class="p">)</span>

<span class="c1"># Re-enable callbacks</span>
<span class="n">enable_callbacks</span><span class="p">()</span>

<span class="c1"># Simulate with callbacks</span>
<span class="n">simulate</span><span class="p">(</span><span class="mf">10000.</span><span class="p">)</span>
</code></pre></div>
<p>Note that the period is always relative to the time when <code>simulate()</code> is
called, so if no offset is defined, the callbacks will be called before
the first step of a simulation, no matter how long the previous
simulation lasted. In the current state, it is not possible yet to
enable/disable callbacks selectively, it is all or none.</p>
<p>Callbacks can only be used with <code>simulate()</code>, not with <code>step()</code> or
<code>simulate_until()</code>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Inputs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Setting inputs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Setting inputs
            </div>
          </div>
        </a>
      
      
        
        <a href="../Configuration/" class="md-footer__link md-footer__link--next" aria-label="Next: Configuration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Configuration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 Julien Vitay, Helge Ülo Dinkelbach, Fred H. Hamker
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>